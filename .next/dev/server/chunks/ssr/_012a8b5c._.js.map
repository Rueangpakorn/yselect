{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mangomini/Documents/github/yselect/src/data/services/mutate-data.ts"],"sourcesContent":["import { getAuthToken } from \"./get-token\";\nimport { getStrapiURL } from \"@/lib/utils\";\n\nexport async function mutateData(method: string, path: string, payload?: any) {\n  const baseUrl = getStrapiURL();\n  const authToken = await getAuthToken();\n  const url = new URL(path, baseUrl);\n\n  if (!authToken) throw new Error(\"No auth token found\");\n\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${authToken}`,\n      },\n      body: JSON.stringify({ ...payload }),\n    });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(\"error\", error);\n    throw error;\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,WAAW,MAAc,EAAE,IAAY,EAAE,OAAa;IAC1E,MAAM,UAAU,IAAA,mIAAY;IAC5B,MAAM,YAAY,MAAM,IAAA,uJAAY;IACpC,MAAM,MAAM,IAAI,IAAI,MAAM;IAE1B,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;IAEhC,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,KAAK;YAChC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,eAAe,CAAC,OAAO,EAAE,WAAW;YACtC;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE,GAAG,OAAO;YAAC;QACpC;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC,SAAS;QACrB,MAAM;IACR;AACF"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/mangomini/Documents/github/yselect/src/data/actions/summary-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { getAuthToken } from \"@/data/services/get-token\";\nimport { mutateData } from \"@/data/services/mutate-data\";\nimport { flattenAttributes } from \"@/lib/utils\";\nimport { redirect } from \"next/navigation\";\nimport { revalidatePath } from \"next/cache\";\n\ninterface Payload {\n  data: {\n    title?: string;\n    videoId: string;\n    summary: string;\n  };\n}\n\nexport async function createSummaryAction(payload: Payload) {\n  const authToken = await getAuthToken();\n  if (!authToken) throw new Error(\"No auth token found\");\n\n  const data = await mutateData(\"POST\", \"/api/summaries\", payload);\n  const flattenedData = flattenAttributes(data);\n  redirect(\"/dashboard/summaries/\" + flattenedData.id);\n}\n\nexport async function updateSummaryAction(prevState: any, formData: FormData) {\n  const rawFormData = Object.fromEntries(formData);\n  const id = rawFormData.id as string;\n\n  const payload = {\n    data: {\n      title: rawFormData.title,\n      summary: rawFormData.summary,\n    },\n  };\n\n  const responseData = await mutateData(\"PUT\", `/api/summaries/${id}`, payload);\n\n  if (!responseData) {\n    return {\n      ...prevState,\n      strapiErrors: null,\n      message: \"Oops! Something went wrong. Please try again.\",\n    };\n  }\n\n  if (responseData.error) {\n    return {\n      ...prevState,\n      strapiErrors: responseData.error,\n      message: \"Failed to update summary.\",\n    };\n  }\n\n  const flattenedData = flattenAttributes(responseData);\n  revalidatePath(\"/dashboard/summaries\");\n\n  return {\n    ...prevState,\n    message: \"Summary updated successfully\",\n    data: flattenedData,\n    strapiErrors: null,\n  };\n}\n\nexport async function deleteSummaryAction(id: string, prevState: any) {\n  const responseData = await mutateData(\"DELETE\", `/api/summaries/${id}`);\n\n  if (!responseData) {\n    return {\n      ...prevState,\n      strapiErrors: null,\n      message: \"Oops! Something went wrong. Please try again.\",\n    };\n  }\n\n  if (responseData.error) {\n    return {\n      ...prevState,\n      strapiErrors: responseData.error,\n      message: \"Failed to delete summary.\",\n    };\n  }\n\n  redirect(\"/dashboard/summaries\");\n}"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;AAUO,eAAe,oBAAoB,OAAgB;IACxD,MAAM,YAAY,MAAM,IAAA,uJAAY;IACpC,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;IAEhC,MAAM,OAAO,MAAM,IAAA,uJAAU,EAAC,QAAQ,kBAAkB;IACxD,MAAM,gBAAgB,IAAA,wIAAiB,EAAC;IACxC,IAAA,iMAAQ,EAAC,0BAA0B,cAAc,EAAE;AACrD;AAEO,eAAe,oBAAoB,SAAc,EAAE,QAAkB;IAC1E,MAAM,cAAc,OAAO,WAAW,CAAC;IACvC,MAAM,KAAK,YAAY,EAAE;IAEzB,MAAM,UAAU;QACd,MAAM;YACJ,OAAO,YAAY,KAAK;YACxB,SAAS,YAAY,OAAO;QAC9B;IACF;IAEA,MAAM,eAAe,MAAM,IAAA,uJAAU,EAAC,OAAO,CAAC,eAAe,EAAE,IAAI,EAAE;IAErE,IAAI,CAAC,cAAc;QACjB,OAAO;YACL,GAAG,SAAS;YACZ,cAAc;YACd,SAAS;QACX;IACF;IAEA,IAAI,aAAa,KAAK,EAAE;QACtB,OAAO;YACL,GAAG,SAAS;YACZ,cAAc,aAAa,KAAK;YAChC,SAAS;QACX;IACF;IAEA,MAAM,gBAAgB,IAAA,wIAAiB,EAAC;IACxC,IAAA,+IAAc,EAAC;IAEf,OAAO;QACL,GAAG,SAAS;QACZ,SAAS;QACT,MAAM;QACN,cAAc;IAChB;AACF;AAEO,eAAe,oBAAoB,EAAU,EAAE,SAAc;IAClE,MAAM,eAAe,MAAM,IAAA,uJAAU,EAAC,UAAU,CAAC,eAAe,EAAE,IAAI;IAEtE,IAAI,CAAC,cAAc;QACjB,OAAO;YACL,GAAG,SAAS;YACZ,cAAc;YACd,SAAS;QACX;IACF;IAEA,IAAI,aAAa,KAAK,EAAE;QACtB,OAAO;YACL,GAAG,SAAS;YACZ,cAAc,aAAa,KAAK;YAChC,SAAS;QACX;IACF;IAEA,IAAA,iMAAQ,EAAC;AACX;;;IArEsB;IASA;IAwCA;;AAjDA,+OAAA;AASA,+OAAA;AAwCA,+OAAA"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/mangomini/Documents/github/yselect/.next-internal/server/app/_not-found/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logoutAction as '0053b117c92d5e7b3588d9738720e4642538f4adb4'} from 'ACTIONS_MODULE0'\nexport {registerUserAction as '607ecc12b1af188aa8a9f3a64cc46dd88f84511900'} from 'ACTIONS_MODULE0'\nexport {loginUserAction as '60dea9128c41bbefe1b2de96b04ea2f87edf5e5cbc'} from 'ACTIONS_MODULE0'\nexport {createSummaryAction as '402d9773ebb4394ab5637a6450ad8f1635372a66bf'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAGA"}}]
}